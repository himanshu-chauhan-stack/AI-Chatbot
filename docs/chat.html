<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chat Assistant - Live Demo</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Copy of main chat styles - optimized for GitHub Pages */
        :root {
          --bg-primary: #f7f7f8;
          --bg-secondary: #ffffff;
          --bg-tertiary: #f1f1f3;
          --text-primary: #2d3748;
          --text-secondary: #4a5568;
          --text-muted: #718096;
          --border-color: #e2e8f0;
          --accent-color: #10a37f;
          --accent-hover: #0d8c6b;
          --user-bg: #10a37f;
          --user-text: #ffffff;
          --ai-bg: #f7f7f8;
          --ai-text: #2d3748;
          --error-color: #e53e3e;
          --warning-color: #f6ad55;
          --success-color: #38a169;
          --spacing-xs: 0.25rem;
          --spacing-sm: 0.5rem;
          --spacing-md: 1rem;
          --spacing-lg: 1.5rem;
          --spacing-xl: 2rem;
          --radius-sm: 0.375rem;
          --radius-md: 0.5rem;
          --radius-lg: 0.75rem;
          --radius-xl: 1rem;
          --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
          --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
          --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        [data-theme="dark"] {
          --bg-primary: #1a1a1a;
          --bg-secondary: #2d2d2d;
          --bg-tertiary: #3a3a3a;
          --text-primary: #ffffff;
          --text-secondary: #e2e8f0;
          --text-muted: #a0aec0;
          --border-color: #4a5568;
          --ai-bg: #2d2d2d;
          --ai-text: #ffffff;
        }
        
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }
        
        body {
          font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
          background-color: var(--bg-primary);
          color: var(--text-primary);
          line-height: 1.6;
          overflow: hidden;
        }
        
        .app-container {
          display: flex;
          flex-direction: column;
          height: 100vh;
          max-width: 100vw;
        }
        
        .chat-header {
          background-color: var(--bg-secondary);
          border-bottom: 1px solid var(--border-color);
          padding: var(--spacing-md);
          flex-shrink: 0;
        }
        
        .header-content {
          display: flex;
          justify-content: space-between;
          align-items: center;
          max-width: 1200px;
          margin: 0 auto;
        }
        
        .header-left {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
        }
        
        .app-title {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          font-size: 1.25rem;
          font-weight: 600;
          color: var(--text-primary);
        }
        
        .app-title i {
          color: var(--accent-color);
        }
        
        .ai-role-selector {
          position: relative;
        }
        
        .role-select {
          padding: var(--spacing-sm) var(--spacing-md);
          border: 1px solid var(--border-color);
          border-radius: var(--radius-md);
          background-color: var(--bg-secondary);
          color: var(--text-primary);
          font-size: 0.875rem;
          cursor: pointer;
          transition: border-color 0.2s ease;
        }
        
        .role-select:focus {
          outline: none;
          border-color: var(--accent-color);
        }
        
        .header-right {
          display: flex;
          gap: var(--spacing-sm);
        }
        
        .btn {
          padding: var(--spacing-sm) var(--spacing-md);
          border: none;
          border-radius: var(--radius-md);
          font-size: 0.875rem;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.2s ease;
          display: inline-flex;
          align-items: center;
          gap: var(--spacing-sm);
        }
        
        .btn-outline {
          background-color: transparent;
          color: var(--text-secondary);
          border: 1px solid var(--border-color);
        }
        
        .btn-outline:hover {
          background-color: var(--bg-tertiary);
        }
        
        .chat-container {
          flex: 1;
          overflow: hidden;
          display: flex;
          flex-direction: column;
        }
        
        .chat-messages {
          flex: 1;
          overflow-y: auto;
          padding: var(--spacing-lg);
          max-width: 1200px;
          margin: 0 auto;
          width: 100%;
        }
        
        .chat-messages::-webkit-scrollbar {
          width: 6px;
        }
        
        .chat-messages::-webkit-scrollbar-track {
          background: var(--bg-tertiary);
        }
        
        .chat-messages::-webkit-scrollbar-thumb {
          background: var(--border-color);
          border-radius: 3px;
        }
        
        .chat-messages::-webkit-scrollbar-thumb:hover {
          background: var(--text-muted);
        }
        
        .message-wrapper {
          display: flex;
          margin-bottom: var(--spacing-lg);
          align-items: flex-start;
          gap: var(--spacing-md);
        }
        
        .message-wrapper.user-message {
          flex-direction: row-reverse;
        }
        
        .message-avatar {
          width: 32px;
          height: 32px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 0.875rem;
          flex-shrink: 0;
        }
        
        .ai-message .message-avatar {
          background-color: var(--accent-color);
          color: white;
        }
        
        .user-message .message-avatar {
          background-color: var(--user-bg);
          color: var(--user-text);
        }
        
        .message-content {
          max-width: 70%;
          min-width: 0;
        }
        
        .user-message .message-content {
          text-align: right;
        }
        
        .message-header {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          margin-bottom: var(--spacing-xs);
        }
        
        .user-message .message-header {
          justify-content: flex-end;
        }
        
        .message-sender {
          font-weight: 600;
          font-size: 0.875rem;
          color: var(--text-secondary);
        }
        
        .message-time {
          font-size: 0.75rem;
          color: var(--text-muted);
        }
        
        .message-text {
          background-color: var(--bg-secondary);
          padding: var(--spacing-md);
          border-radius: var(--radius-lg);
          border: 1px solid var(--border-color);
          font-size: 0.875rem;
          line-height: 1.5;
        }
        
        .user-message .message-text {
          background-color: var(--user-bg);
          color: var(--user-text);
          border-color: var(--user-bg);
        }
        
        .ai-message .message-text {
          background-color: var(--ai-bg);
          color: var(--ai-text);
        }
        
        .chat-input-container {
          background-color: var(--bg-secondary);
          border-top: 1px solid var(--border-color);
          padding: var(--spacing-lg);
          flex-shrink: 0;
        }
        
        .input-wrapper {
          max-width: 1200px;
          margin: 0 auto;
        }
        
        .input-area {
          display: flex;
          align-items: flex-end;
          gap: var(--spacing-md);
          background-color: var(--bg-secondary);
          border: 1px solid var(--border-color);
          border-radius: var(--radius-xl);
          padding: var(--spacing-md);
          transition: border-color 0.2s ease;
        }
        
        .input-area:focus-within {
          border-color: var(--accent-color);
        }
        
        .message-input {
          flex: 1;
          border: none;
          outline: none;
          background: transparent;
          color: var(--text-primary);
          font-size: 0.875rem;
          line-height: 1.5;
          resize: none;
          min-height: 24px;
          max-height: 120px;
          font-family: inherit;
        }
        
        .message-input::placeholder {
          color: var(--text-muted);
        }
        
        .send-btn {
          width: 36px;
          height: 36px;
          border: none;
          border-radius: 50%;
          background-color: var(--accent-color);
          color: white;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all 0.2s ease;
          flex-shrink: 0;
        }
        
        .send-btn:hover {
          background-color: var(--accent-hover);
          transform: scale(1.05);
        }
        
        .send-btn:disabled {
          background-color: var(--text-muted);
          cursor: not-allowed;
          transform: none;
        }
        
        .input-footer {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-top: var(--spacing-sm);
          font-size: 0.75rem;
          color: var(--text-muted);
        }
        
        .credits {
          margin-top: var(--spacing-sm);
          text-align: center;
          font-size: 0.95rem; font-weight: 500; box-shadow: 0 2px 8px rgba(124, 58, 237, 0.15);
          color: var(--text-color);
          background: rgba(66, 133, 244, 0.08);
          padding: 8px 16px;
          border-radius: 8px;
          border: 1px solid rgba(66, 133, 244, 0.2);
          user-select: none;
          letter-spacing: 0.5px;
          font-weight: 500;
        }
        
        .credits .heart {
          display: inline-block;
          color: #e53e3e;
          animation: heartbeat 1.5s ease-in-out infinite;
          margin: 0 3px;
        }
        
        @keyframes heartbeat {
          0%, 100% { 
            transform: scale(1); 
            color: #e53e3e;
          }
          50% { 
            transform: scale(1.3); 
            color: #ff6b6b;
          }
        }
        }
        
        .demo-notice {
          background: linear-gradient(135deg, #FF69B4 0%, #6366F1 45%, #3B82F6 100%);
          color: white;
          padding: 16px 20px;
          text-align: center;
          font-size: 0.95rem; font-weight: 500; box-shadow: 0 2px 8px rgba(124, 58, 237, 0.15);
        }
        
        .demo-notice a {
          color: #fff;
          text-decoration: underline;
        }

        /* API key bar */
        .apikey-bar {
          background: var(--bg-tertiary);
          border-bottom: 1px solid var(--border-color);
          padding: 6px 10px;
          display: flex;
          gap: 8px;
          align-items: center;
          flex-wrap: wrap;
          font-size: 12px;
        }
        .apikey-bar strong { color: var(--accent-color); }
        .apikey-bar input[type="password"], .apikey-bar input[type="text"] {
          flex: 1;
          min-width: 160px;
          padding: 6px 8px;
          border: 1px solid var(--border-color);
          border-radius: 6px;
          background: var(--bg-secondary);
          color: var(--text-primary);
          font-size: 12px;
        }
        .apikey-bar button.small-btn {
          background: var(--accent-color);
          border: none;
          color: #fff;
          padding: 6px 10px;
          border-radius: 6px;
          cursor: pointer;
          font-size: 12px;
          display: flex;
          align-items: center;
          gap: 4px;
        }
        .apikey-bar button.small-btn.secondary { background: #4a5568; }
        .apikey-bar .status { font-weight: 600; }
        .apikey-bar .warn { color: var(--warning-color); font-weight: 600; }
        .apikey-bar .err { color: var(--error-color); font-weight: 600; }
        .apikey-bar .ok { color: var(--success-color); font-weight: 600; }
        
        @media (max-width: 768px) {
          .chat-messages {
            padding: var(--spacing-md);
          }
          
          .chat-input-container {
            padding: var(--spacing-md);
          }
          
          .message-content {
            max-width: 85%;
          }
          
          .header-content {
            flex-direction: column;
            gap: var(--spacing-md);
            align-items: stretch;
          }
          
          .header-left {
            justify-content: space-between;
          }
          
          .header-right {
            justify-content: center;
          }
        }
    </style>
</head>
<body>
        <div class="demo-notice" style="display: flex; justify-content: center; align-items: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; text-align: center; padding: 12px;">
        Note: This is a static demo. For full functionality, 
        <a href="https://github.com/himanshu-chauhan-stack/AI-Chatbot" target="_blank" style="color: #FFD700; text-decoration: underline; font-weight: bold;">
             clone the repo 
        </a> 
        and run locally with your Gemini API key.
    </div>
        <header class="chat-header">
            <div class="header-content">
                <div class="header-left">
                    <h1 class="app-title">
                        <i class="fas fa-robot"></i>
                        AI Chat Assistant
                    </h1>
                    <div class="ai-role-selector">
                        <select id="aiRoleSelect" class="role-select">
                            <option value="helpful_assistant">Helpful Assistant</option>
                            <option value="teacher">Teacher</option>
                            <option value="financial_advisor">Financial Advisor</option>
                            <option value="creative_writer">Creative Writer</option>
                            <option value="technical_expert">Technical Expert</option>
                        </select>
                    </div>
                </div>
                <div class="header-right">
                    <button id="clearChatBtn" class="btn btn-outline" title="Clear Chat">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button id="toggleThemeBtn" class="btn btn-outline" title="Toggle Theme">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Optional API Key Bar (NOT SECURE ON PUBLIC SITE) -->
        <div class="apikey-bar" id="apiKeyBar">
          <span><strong>Live Mode (Optional)</strong> Paste your <code>Gemini API Key</code> to get real answers. <span class="warn">Key is stored only in memory but visible to anyone inspecting the page.</span></span>
          <input type="password" id="apiKeyInput" placeholder="AI Studio API Key (starts with AI...)" autocomplete="off" />
          <button class="small-btn" id="toggleKeyVisBtn" title="Show / Hide"><i class="fas fa-eye"></i></button>
          <button class="small-btn" id="enableRealBtn"><i class="fas fa-bolt"></i> Enable</button>
          <span id="liveStatus" class="status"></span>
        </div>

        <!-- Chat Container -->
        <main class="chat-container">
            <div class="chat-messages" id="chatMessages">
                <!-- Welcome message -->
                <div class="message-wrapper ai-message">
                    <div class="message-avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="message-content">
                        <div class="message-header">
                            <span class="message-sender">AI Assistant</span>
                            <span class="message-time" id="welcomeTime"></span>
                        </div>
                        <div class="message-text">
                            <p>Hello! This is a static demo of the AI Chat Assistant.</p>
                            <p>?? To use the full chat functionality with Gemini AI:</p>
                            <p>1. Clone the repository from GitHub</p>
                            <p>2. Set up your Google Gemini API key</p>
                            <p>3. Run <code>python app.py</code> locally</p>
                            <p>Try typing a message below to see the UI in action!</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Input Area -->
        <footer class="chat-input-container">
            <div class="input-wrapper">
                <div class="input-area">
                    <textarea 
                        id="messageInput" 
                        class="message-input" 
                        placeholder="Type your message here (demo mode - responses are simulated)..." 
                        rows="1"
                        maxlength="2000"
                    ></textarea>
                    <button id="sendBtn" class="send-btn" title="Send Message">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                <div class="input-footer">
                    <span class="character-count">
                        <span id="charCount">0</span>/2000
                    </span>
                    <span class="input-hint">
                        Press Enter to send (demo responses only)
                    </span>
                </div>
                <div class="credits">Made with <span class="heart">??</span> by <strong>Ritesh</strong> &amp; <strong>Himanshu</strong></div>
            </div>
        </footer>
    </div>

    <script>
        // Static demo functionality
        class DemoChatApp {
            constructor() {
                this.messageInput = document.getElementById('messageInput');
                this.sendBtn = document.getElementById('sendBtn');
                this.chatMessages = document.getElementById('chatMessages');
                this.clearChatBtn = document.getElementById('clearChatBtn');
                this.toggleThemeBtn = document.getElementById('toggleThemeBtn');
                this.aiRoleSelect = document.getElementById('aiRoleSelect');
                this.charCount = document.getElementById('charCount');
                this.currentTheme = localStorage.getItem('theme') || 'light';
                
                this.demoResponses = [
                    "This is a demo response! In the full version, I'd be powered by Google Gemini 1.5 Flash.",
                    "?? Great question! To see real AI responses, add your API key above (use at your own risk on public pages).",
                    "? I appreciate your interest! This static demo shows the UI design and features.",
                    "?? For the complete experience with secure backend & streaming, run it locally.",
                    "?? This interface supports multiple AI personas, real-time streaming (when backend present), and more!"
                ];

                // Live mode fields
                this.apiKeyInput = document.getElementById('apiKeyInput');
                this.enableRealBtn = document.getElementById('enableRealBtn');
                this.liveStatus = document.getElementById('liveStatus');
                this.toggleKeyVisBtn = document.getElementById('toggleKeyVisBtn');
                this.apiKey = null; // never persist
                this.demoMode = true;

                // Simple role prompts (subset of backend)
                this.rolePrompts = {
                  helpful_assistant: "You are a concise, helpful AI assistant.",
                  teacher: "You are a patient teacher. Explain clearly with structured steps.",
                  financial_advisor: "You provide general financial education (no personalized financial advice).",
                  creative_writer: "You craft vivid, creative and original writing pieces.",
                  technical_expert: "You answer with technical precision and, when useful, code examples."
                };
                
                this.init();
            }
            
            init() {
                this.initTheme();
                this.initEventListeners();
                this.updateCharacterCount();
                document.getElementById('welcomeTime').textContent = this.formatTime(new Date());
            }
            
            initTheme() {
                document.documentElement.setAttribute('data-theme', this.currentTheme);
                this.updateThemeIcon();
            }
            
            initEventListeners() {
                this.sendBtn.addEventListener('click', () => this.sendMessage());
                this.messageInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        this.sendMessage();
                    }
                });
                this.messageInput.addEventListener('input', () => this.handleInputChange());
                this.clearChatBtn.addEventListener('click', () => this.clearChat());
                this.toggleThemeBtn.addEventListener('click', () => this.toggleTheme());
                this.aiRoleSelect.addEventListener('change', () => this.onRoleChange());
                this.enableRealBtn.addEventListener('click', () => this.enableRealMode());
                this.toggleKeyVisBtn.addEventListener('click', () => this.toggleKeyVisibility());
            }
            
            handleInputChange() {
                this.updateCharacterCount();
                this.updateSendButton();
            }
            
            updateCharacterCount() {
                const count = this.messageInput.value.length;
                this.charCount.textContent = count;
            }
            
            updateSendButton() {
                const hasText = this.messageInput.value.trim().length > 0;
                this.sendBtn.disabled = !hasText;
            }
            
            sendMessage() {
                const message = this.messageInput.value.trim();
                if (!message) return;
                
                // Add user message
                this.addMessage('user', message);
                
                // Clear input
                this.messageInput.value = '';
                this.handleInputChange();
                
        if (this.demoMode || !this.apiKey) {
          // Simulate AI response after delay
          setTimeout(() => {
            const response = this.demoResponses[Math.floor(Math.random() * this.demoResponses.length)];
            this.addMessage('ai', response);
          }, 600 + Math.random() * 1200);
        } else {
          this.callGemini(message);
        }
            }
            
            addMessage(role, content) {
                const messageWrapper = document.createElement('div');
                messageWrapper.className = `message-wrapper ${role}-message`;
                
                const avatar = document.createElement('div');
                avatar.className = 'message-avatar';
                avatar.innerHTML = role === 'user' ? '<i class="fas fa-user"></i>' : '<i class="fas fa-robot"></i>';
                
                const messageContent = document.createElement('div');
                messageContent.className = 'message-content';
                
                const messageHeader = document.createElement('div');
                messageHeader.className = 'message-header';
                
                const messageSender = document.createElement('span');
                messageSender.className = 'message-sender';
                messageSender.textContent = role === 'user' ? 'You' : 'AI Assistant (Demo)';
                
                const messageTime = document.createElement('span');
                messageTime.className = 'message-time';
                messageTime.textContent = this.formatTime(new Date());
                
                const messageText = document.createElement('div');
                messageText.className = 'message-text';
                messageText.textContent = content;
                
                messageHeader.appendChild(messageSender);
                messageHeader.appendChild(messageTime);
                
                messageContent.appendChild(messageHeader);
                messageContent.appendChild(messageText);
                
                messageWrapper.appendChild(avatar);
                messageWrapper.appendChild(messageContent);
                
                this.chatMessages.appendChild(messageWrapper);
                this.scrollToBottom();
            }
            
            clearChat() {
                const messages = this.chatMessages.querySelectorAll('.message-wrapper');
                messages.forEach((msg, index) => {
                    if (index > 0) { // Keep welcome message
                        msg.remove();
                    }
                });
            }
            
            toggleTheme() {
                this.currentTheme = this.currentTheme === 'light' ? 'dark' : 'light';
                document.documentElement.setAttribute('data-theme', this.currentTheme);
                localStorage.setItem('theme', this.currentTheme);
                this.updateThemeIcon();
            }
            
            updateThemeIcon() {
                const icon = this.toggleThemeBtn.querySelector('i');
                if (this.currentTheme === 'dark') {
                    icon.className = 'fas fa-sun';
                } else {
                    icon.className = 'fas fa-moon';
                }
            }
            
            onRoleChange() {
                const selectedRole = this.aiRoleSelect.value;
                const selectedOption = this.aiRoleSelect.options[this.aiRoleSelect.selectedIndex];
                if (this.demoMode) {
                  this.addMessage('ai', `Demo: Switched to ${selectedOption.text}. (Add API key to get real answers.)`);
                } else {
                  this.addMessage('ai', `Live mode: Using ${selectedOption.text} perspective.`);
                }
            }
            
            scrollToBottom() {
                setTimeout(() => {
                    this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
                }, 100);
            }
            
            formatTime(date) {
                return date.toLocaleTimeString([], { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
            }

            enableRealMode() {
              const key = (this.apiKeyInput.value || '').trim();
              if (!key) {
                this.setLiveStatus('Provide key first', 'err');
                return;
              }
              if (!/^AI[a-zA-Z0-9_\-]{20,}$/.test(key)) {
                this.setLiveStatus('Key format looks unusual', 'warn');
              }
              this.apiKey = key; // memory only
              this.demoMode = false;
              this.setLiveStatus('Live mode ON', 'ok');
              this.addMessage('ai', 'Live mode enabled. Your key stays only in this page memory. Avoid using production keys on public sites.');
            }

            toggleKeyVisibility() {
              if (!this.apiKeyInput) return;
              if (this.apiKeyInput.type === 'password') {
                this.apiKeyInput.type = 'text';
                this.toggleKeyVisBtn.innerHTML = '<i class="fas fa-eye-slash"></i>';
              } else {
                this.apiKeyInput.type = 'password';
                this.toggleKeyVisBtn.innerHTML = '<i class="fas fa-eye"></i>';
              }
            }

            setLiveStatus(msg, cls) {
              this.liveStatus.textContent = msg;
              this.liveStatus.className = 'status ' + (cls || '');
            }

            async callGemini(userMessage) {
              const role = this.aiRoleSelect.value;
              const sys = this.rolePrompts[role] || this.rolePrompts.helpful_assistant;
              const prompt = `${sys}\n\nUser: ${userMessage}`;
              try {
                const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${encodeURIComponent(this.apiKey)}`, {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json' },
                  body: JSON.stringify({
                    contents: [{ role: 'user', parts: [{ text: prompt }]}]
                  })
                });
                if (!res.ok) {
                  const txt = await res.text();
                  this.addMessage('ai', `Error ${res.status}: ${txt.slice(0,400)}`);
                  if (res.status === 401 || res.status === 403) this.setLiveStatus('Auth error', 'err');
                  return;
                }
                const data = await res.json();
                const text = data?.candidates?.[0]?.content?.parts?.map(p => p.text).join('\n') || '(No content)';
                // Simulated streaming reveal
                await this.typeOut(text);
              } catch (e) {
                this.addMessage('ai', 'Request failed: ' + e.message);
                this.setLiveStatus('Network error', 'err');
              }
            }

            async typeOut(fullText) {
              const wrapper = document.createElement('div');
              wrapper.className = 'message-wrapper ai-message';
              wrapper.innerHTML = `\n                <div class="message-avatar"><i class="fas fa-robot"></i></div>\n                <div class="message-content">\n                  <div class="message-header">\n                    <span class="message-sender">AI Assistant</span>\n                    <span class="message-time">${this.formatTime(new Date())}</span>\n                  </div>\n                  <div class="message-text" id="streamingMsg"></div>\n                </div>`;
              this.chatMessages.appendChild(wrapper);
              const box = wrapper.querySelector('#streamingMsg');
              let i = 0;
              const speed = 18; // chars per frame approx
              function chunk() { return fullText.slice(i, i+speed); }
              while (i < fullText.length) {
                box.textContent += chunk();
                i += speed;
                await new Promise(r => setTimeout(r, 30));
                this.scrollToBottom();
              }
              this.scrollToBottom();
            }
        }
        
        // Initialize demo app
        document.addEventListener('DOMContentLoaded', function() {
            new DemoChatApp();
        });
    </script>
</body>
</html>






